(this.webpackJsonpnote_app=this.webpackJsonpnote_app||[]).push([[0],{46:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(22),o=n.n(c),i=(n(46),n(47),n(26)),s=n(11),u=n(2),l=n(3),h=n.n(l),p=n(7),f=n(8),d=n(64),j=n(65),g=n(39),b=n(68),v=n(67),O=n(69),x=(n(49),n(1)),m=function(e){var t={alignItems:e.verticalAlign,justifyContent:e.horizontalAlign};return Object(x.jsx)("div",{className:"table-container",style:t,children:e.children})};m.defaultProps={verticalAlign:"center",horizontalAlign:"center"};var w=m,k=a.a.createContext({showLoading:function(e){}}),y=n(33),S=(n(51),n(9)),C=n(10),A=n(21),I="token",L=function(){function e(t){Object(S.a)(this,e),this.storageManager=t}return Object(C.a)(e,[{key:"login",value:function(){var e=Object(p.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("admin"==t&&"admin"==n){e.next=2;break}throw new Error("Invalid credentials provided.");case 2:return e.next=4,this.storageManager.set(I,"debug-token");case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(p.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageManager.remove(I);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isLoggedIn",value:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageManager.get(I);case 2:return e.abrupt("return",!!e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),M=function(){function e(){Object(S.a)(this,e)}return Object(C.a)(e,[{key:"register",value:function(e){e.register({authManager:Object(A.b)(L).singleton()})}}]),e}(),E=function(){function e(){Object(S.a)(this,e)}return Object(C.a)(e,[{key:"set",value:function(){var e=Object(p.a)(h.a.mark((function e(t,n,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setCookie(t,n,r.toUTCString());case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getCookie(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setCookie(t,"",new Date(Date.now()-1e3).toUTCString());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.cookie="";case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setCookie",value:function(e,t,n){var r="expires="+n;document.cookie=e+"="+t+";"+r+";path=/"}},{key:"getCookie",value:function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),r=0;r<n.length;r++){for(var a=n[r];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""}},{key:"isSupported",value:function(){return!0}}]),e}(),T=function(){function e(){Object(S.a)(this,e)}return Object(C.a)(e,[{key:"set",value:function(){var e=Object(p.a)(h.a.mark((function e(t,n,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem(t,JSON.stringify({value:n,expiration:r.toUTCString()}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=localStorage.getItem(t)){e.next=5;break}return console.log("Target item not found in local storage, key: ".concat(t)),e.abrupt("return",void 0);case 5:if(r=JSON.parse(n),a=new Date(r.expiration),c=new Date,!(a>=c)){e.next=11;break}return console.log("This entry is already expired: ".concat(a,", key: ").concat(t)),e.abrupt("return",void 0);case 11:return e.abrupt("return",r.value);case 14:return e.prev=14,e.t0=e.catch(0),localStorage.removeItem(t),console.error(e.t0),e.abrupt("return",void 0);case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.clear();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"isSupported",value:function(){return!!localStorage}}]),e}(),P=function(){function e(t){if(Object(S.a)(this,e),this.storage=void 0,console.log("StorageManager constructor"),this.storage=t.find((function(e){return e.isSupported()})),!this.storage)throw new Error("No supported storage implementation is found")}return Object(C.a)(e,[{key:"set",value:function(){var e=Object(p.a)(h.a.mark((function e(t,n,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||(r=new Date(Date.now()+864e5)),e.next=3,this.storage.set(t,n,r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.remove(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.clear();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),N=function(){function e(){Object(S.a)(this,e),this.PLATFORM_WEB="WEB"}return Object(C.a)(e,[{key:"register",value:function(e){var t={localStorageImpl:Object(A.b)(T).singleton(),cookieStorageImpl:Object(A.b)(E).singleton(),storageManager:Object(A.b)(P).singleton(),randomExaple:Object(A.d)("example2")};if(this.getPlatform()!=this.PLATFORM_WEB)throw new Error("Not supported platform: ");t.storages=Object(A.c)((function(e,t){return[e,t]})).singleton(),console.log("StorageModule components",t),e.register(t)}},{key:"getPlatform",value:function(){return this.PLATFORM_WEB}}]),e}(),R=new(function(){function e(){var t=this;Object(S.a)(this,e),this.container=void 0,this.container=A.e({injectionMode:A.a.CLASSIC}),[new N,new M].forEach((function(e){return e.register(t.container)}))}return Object(C.a)(e,[{key:"get",value:function(){return this.container.cradle}}]),e}()),F=a.a.createContext(R),B=n(13),D=n(66),q=a.a.createContext({show:function(e){}}),G=function(e){var t,n,a,c=Object(r.useState)([]),o=Object(f.a)(c,2),i=o[0],s=o[1],u=null;i.length>0&&(u=i[i.length-1]);var l={show:function(e){!function(e){s([].concat(Object(B.a)(i),[e]))}(e)}};return Object(x.jsx)(q.Provider,{value:l,children:Object(x.jsxs)("div",{className:"alert-dialog-component",children:[Object(x.jsxs)(D.a,{show:0!=i.length,animation:!1,children:[Object(x.jsx)(D.a.Header,{children:Object(x.jsx)(D.a.Title,{children:function(){if(0==i.length)return null;var e=i[i.length-1];if(e.title)return e.title;switch(e.type){case"error":return"Error";case"warning":return"Warning";case"info":return"Info";default:return"Unknown"}}()})}),Object(x.jsx)(D.a.Body,{children:null===(t=u)||void 0===t?void 0:t.message}),Object(x.jsx)(D.a.Footer,{children:null===(n=u)||void 0===n||null===(a=n.buttons)||void 0===a?void 0:a.map((function(e){return Object(x.jsx)(O.a,{variant:e.type,onClick:function(){e.onClick&&e.onClick(),0==i.length&&console.warn("The dialog stack was already empty!"),i.pop(),s(Object(B.a)(i))},children:e.text})}))})]}),e.children]})})},U=a.a.useState,W=function(e){var t=U(!1),n=Object(f.a)(t,2),a=n[0],c=n[1],o=Object(y.a)(),i=o.register,l=o.handleSubmit,m=Object(r.useContext)(k),S=Object(r.useContext)(q),C=Object(r.useContext)(F).get().authManager,A=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.showLoading(!0),e.prev=1,e.next=4,C.login(t.username,t.password);case 4:c(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),S.show({type:"error",message:e.t0.message,buttons:[{type:"danger",text:"OK"}]});case 10:m.showLoading(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return a?Object(x.jsx)(s.a,{to:"/"}):Object(x.jsx)("div",{className:"page component-login",children:Object(x.jsx)(w,{horizontalAlign:"center",verticalAlign:"center",children:Object(x.jsx)(d.a,{fluid:!0,children:Object(x.jsx)(j.a,{children:Object(x.jsx)(g.a,{md:{span:4,offset:4},children:Object(x.jsx)(b.a,{children:Object(x.jsx)(b.a.Body,{children:Object(x.jsx)(v.a,{onSubmit:l(A),children:Object(x.jsxs)("div",{className:"d-grid gap-2",children:[Object(x.jsxs)(v.a.Group,{children:[Object(x.jsx)(v.a.Label,{children:"Username"}),Object(x.jsx)(v.a.Control,Object(u.a)({},i("username")))]}),Object(x.jsxs)(v.a.Group,{children:[Object(x.jsx)(v.a.Label,{children:"Password"}),Object(x.jsx)(v.a.Control,Object(u.a)({type:"password"},i("password")))]}),Object(x.jsx)(O.a,{type:"submit",variant:"primary",children:"Login"}),Object(x.jsx)(O.a,{type:"button",variant:"secondary",children:"Skip login"}),Object(x.jsx)(O.a,{type:"button",variant:"link",children:"Registration"})]})})})})})})})})})},_=(n(60),a.a.useState),J=function(e){var t=_(!1),n=Object(f.a)(t,2),r=n[0],a=n[1],c={showLoading:function(e){return a(e)}};return Object(x.jsxs)(k.Provider,{value:c,children:[r&&Object(x.jsx)("div",{className:"loading-component",children:Object(x.jsxs)("div",{className:"lds-ripple",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})}),e.children]})},z=(n(61),function(e){var t=Object(r.useContext)(F).get().authManager,n=Object(r.useState)(0),a=Object(f.a)(n,2),c=a[0],o=a[1];if(Object(r.useEffect)((function(){console.log("AuthGuard component useEffect is running"),Object(p.a)(h.a.mark((function n(){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("AuthGuard inner component is running"),n.next=3,t.isLoggedIn();case 3:r=n.sent,console.log("AuthGuard, isLoggedIn: ".concat(r,", authRequired: ").concat(e.authRequired)),r!==e.authRequired?o(1):o(2);case 6:case"end":return n.stop()}}),n)})))()}),[]),console.log("State: ",c),0==c)return Object(x.jsx)(x.Fragment,{children:"AuthGuard is running..."});if(1==c)return Object(x.jsx)(s.a,{to:"/login"});if(2==c)return Object(x.jsx)(x.Fragment,{children:e.children});throw new Error("Invalid state AuthRequiredComponent")});a.a.useState;var H=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(F.Provider,{value:R,children:Object(x.jsx)(J,{children:Object(x.jsx)(G,{children:Object(x.jsx)(i.a,{children:Object(x.jsxs)(s.d,{children:[Object(x.jsx)(s.b,{path:"/login",component:W,children:Object(x.jsx)(z,{authRequired:!1,children:Object(x.jsx)(W,{})})}),Object(x.jsx)(s.b,{path:"/",children:Object(x.jsxs)(z,{authRequired:!0,children:["This is the main page, you can navigate with these link to login page: ",Object(x.jsx)(i.b,{to:"/login",children:"Login"})]})})]})})})})})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(H,{})}),document.getElementById("root")),K()}},[[62,1,2]]]);
//# sourceMappingURL=main.564b606a.chunk.js.map